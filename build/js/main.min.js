function getDataFromApi(a,b){var c={key:"AIzaSyAt0jGSlpc9KfAJJN2KM15XS8f52bQjyKo",address:a};$.getJSON(CIVIC_INFO_BASE_URL,c,b).fail(function(){$(".invalid-address-page").removeAttr("hidden").show(),$(".contact-page").hide(),$(".address-page").hide()})}function makeAddressString(){return $("#street-input").val()+" "+$("#city-input").val()+" "+$("#state-select option:selected").val()+" "+$("#postal-code-input").val()}function getOfficeByOffical(a,b){var c;return a.offices.forEach(function(a){a.officialIndices.forEach(function(d){if(d==b)return c=a,!1})}),c}function displaySearchData(a){var b="";a.officials?a.officials.forEach(function(c,d){b+=displayResult(c,getOfficeByOffical(a,d)),$(".contact-page").html(b)}):($(".invalid-address-page").removeAttr("hidden").show(),$(".contact-page").hide(),$(".address-page").hide())}function displayResult(a,b){var c=$(resultTemplate).clone();if(a.photoUrl){var d=a.photoUrl;c.find(".headshot-container").css("background-image",'url("'+d+'"), url(public/img/noIMG.jpg)')}else c.find(".headshot-container").css("background-image","url(public/img/noIMG.jpg)");if(c.find(".office").text("Office: "+b.name),a.urls){var e=a.name;c.find("h3 .url").text(e);var f=a.urls[0];c.find("h3 .url").attr("href",f)}else{c.find("h3 .url").remove();var g=a.name;c.find("h3").append(g)}if(a.party){var h=a.party;c.find(".party span").text(h)}else c.find(".party").remove();if(a.phones){var i=a.phones[0];c.find("li .tel").text(i),c.find("li .tel").attr("href","tel:"+i)}else c.find("li .tel").remove();if(a.address){var j=a.address[0].city,k=a.address[0].zip;if(c.find("li .locality").text(j),c.find("li .postal-code").text(k),a.address[0].state){var l=a.address[0].state;c.find("li .region").text(l)}else c.find("li .region").remove(),c.find("li .comma-one").remove();if(a.address[0].line2){var m=a.address[0].line1,n=a.address[0].line2;c.find("li .street-address").html(m+"<br>"+n)}else{var o=a.address[0].line1;c.find("li .street-address").text(o)}}else c.find("li:contains(Address)").remove();if(a.emails){var p=a.emails[0];c.find("li .email").text(p),c.find("li .email").attr("href","mailto:"+p)}else c.find('li:contains("Email")').remove();return c[0].outerHTML}function getLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(getPosition,error,options):($(".geo-results-error-page").removeAttr("hidden").show(),$(".address-page").hide())}function error(a){console.warn("Error"+a.code+": "+a.message),$(".address-page").hide(),$(".geo-results-error-page").removeAttr("hidden").show(),$("#address-form").show()}function getPosition(a){var b=new google.maps.Geocoder,c=a.coords.latitude,d=a.coords.longitude,e=[];e.push(c,d);var f={lat:parseFloat(e[0]),lng:parseFloat(e[1])};b.geocode({location:f},function(a,b){var c=function(b){var c;return a[0].address_components.forEach(function(a){a.types.forEach(function(d){if(b==d)return c=a,!1})}),c};if("OK"===b){var d=[c("street_number")][0].long_name+" "+[c("route")][0].short_name,e=[c("locality")][0].long_name,f=[c("administrative_area_level_1")][0].short_name,g=[c("postal_code")][0].short_name;$("#street-input").val(d),$("#city-input").val(e),$("#state-select option").filter(function(a,b){return $(b).val()==f}).prop("selected",!0),$("#postal-code-input").val(g),$("#address-form").show(),$(".loader").hide()}else $(".address-page").hide(),$(".geo-results-error-page").removeAttr("hidden").show(),$("#address-form").show()})}var CIVIC_INFO_BASE_URL="https://www.googleapis.com/civicinfo/v2/representatives",resultTemplate=$('<section class="contact-card usa-grid usa-section"><div class="headshot-container"></div><div class="info"><h3>Name: <a class="url fn" target="_blank" href=""></a></h3><h4 class="office">Office: </h4><h4 class="party">Party: <span></span></h4><details class="contact-info"><summary>Contact Information</summary><ul><li>Phone: <a href="" class="tel"></a></li><li>Address:<div class="adr"><div class="street-address"></div><span class="locality"></span><span class="comma-one">, </span><span class="region"></span><span> </span><span class="postal-code"></span></div></li><li>Email: <a class="email"href="mailto:"></a></li></ul></details></div></section>'),options={timeout:6e3};$(document).ready(function(a){$(window).on("beforeunload",function(){$(window).scrollTop(0)}),$(".landing-page").on("click","#start-link",function(a){a.preventDefault(),$(".landing-page").hide(),$(".loader").hide(),$(".address-page").removeAttr("hidden"),$("body").scrollTop(0)}),$(".address-page").on("click","#geolocate-btn",function(a){a.preventDefault(),$("#address-submit").focus(),$("#address-form").hide(),$(".loader").show(),getLocation(),$("#address-form").scrollTop(0)}),$(".geo-results-error-page").on("click","#geo-error-btn",function(a){a.preventDefault(),$(".address-page").show(),$("#address-form").show(),$(".loader").hide(),$(".geo-results-error-page").hide()}),$(".invalid-address-page").on("click","#invalid-address-btn",function(a){a.preventDefault(),$(".address-page").show(),$(".loader").hide(),$(".invalid-address-page").hide()}),$(".address-page").on("submit",function(a){a.preventDefault(),getDataFromApi(makeAddressString(),displaySearchData),$(".address-page").hide(),$(".contact-page").removeAttr("hidden"),$(".contact-page").show(),$(".contact-page").scrollTop(0)})});